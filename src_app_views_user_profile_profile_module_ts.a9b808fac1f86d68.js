"use strict";(self.webpackChunkEcommerce=self.webpackChunkEcommerce||[]).push([["src_app_views_user_profile_profile_module_ts"],{1477:(D,g,r)=>{r.r(g),r.d(g,{ProfileModule:()=>o});var p=r(6895),y=r(9197),a=r(4006),f=r(2340),e=r(4650),b=r(7185),u=r(4463),N=r(5760);function d(n,i){1&n&&e._UZ(0,"img",18)}function I(n,i){if(1&n&&e._UZ(0,"img",19),2&n){const t=e.oxw();e.s9C("src",t.base64,e.LSH)}}function v(n,i){if(1&n&&e._UZ(0,"img",20),2&n){const t=e.oxw();e.s9C("src",t.url+(null==t.userImage?null:t.userImage.value),e.LSH)}}class m{constructor(i,t,s){this.toastr=i,this._TranslateService=t,this._ApiserviceService=s,this.SubscriptionArr=[],this.lang="",this.egyptCites=[],this.userID="",this.fileToUpload="",this.filename="",this.url=`${f.N.imageUrl}`,this.Form=new a.cw({name:new a.NI(null,[a.kI.required,a.kI.minLength(3)]),userImage:new a.NI(null),phoneNumber:new a.NI(null,[a.kI.required,a.kI.minLength(11)])})}get name(){return this.Form.get("name")}get phoneNumber(){return this.Form.get("phoneNumber")}get userImage(){return this.Form.get("userImage")}ngOnInit(){this.language(),this.getUserById(),this.egyptCites=[{cityID:1,cityArabicName:"\u0627\u0644\u0627\u0633\u0643\u0646\u062f\u0631\u064a\u0629",cityEnglishName:"Alexandria"},{cityID:2,cityArabicName:"\u0627\u0633\u0648\u0627\u0646",cityEnglishName:"Aswan\t"},{cityID:3,cityArabicName:"\u0627\u0633\u064a\u0648\u0637",cityEnglishName:"Asyut"},{cityID:4,cityArabicName:"\u0627\u0644\u0628\u062d\u064a\u0631\u0629",cityEnglishName:"Beheira"},{cityID:5,cityArabicName:"\u0628\u0646\u064a \u0633\u0648\u064a\u0641",cityEnglishName:"Beni Suef"},{cityID:6,cityArabicName:"\u0627\u0644\u0642\u0627\u0647\u0631\u0629",cityEnglishName:"Cairo"},{cityID:7,cityArabicName:"\u0627\u0644\u062f\u0642\u0647\u0644\u064a\u0629",cityEnglishName:"Dakahlia"},{cityID:8,cityArabicName:"\u062f\u0645\u064a\u0627\u0637",cityEnglishName:"Damietta"},{cityID:9,cityArabicName:"\u0627\u0644\u0641\u064a\u0648\u0645",cityEnglishName:"Faiyum"},{cityID:10,cityArabicName:"\u0627\u0644\u063a\u0631\u0628\u064a\u0629",cityEnglishName:"Gharbia\t"},{cityID:11,cityArabicName:"\u0627\u0644\u062c\u064a\u0632\u0629",cityEnglishName:"Giza"},{cityID:12,cityArabicName:"\u0627\u0644\u0625\u0633\u0645\u0627\u0639\u0644\u064a\u0629",cityEnglishName:"Ismailia"},{cityID:13,cityArabicName:"\u0643\u0641\u0631 \u0627\u0644\u0634\u064a\u062e",cityEnglishName:"Kafr El Sheikh"},{cityID:14,cityArabicName:"\u0627\u0644\u0623\u0642\u0635\u0631",cityEnglishName:"Luxor"},{cityID:15,cityArabicName:"\u0645\u0637\u0631\u0648\u062d",cityEnglishName:"Matruh"},{cityID:16,cityArabicName:"\u0627\u0644\u0645\u0646\u064a\u0627",cityEnglishName:"Minya"},{cityID:17,cityArabicName:"\u0627\u0644\u0645\u0646\u0648\u0641\u064a\u0629",cityEnglishName:"Monufia"},{cityID:18,cityArabicName:"\u0628\u0648\u0631 \u0633\u0639\u064a\u062f",cityEnglishName:"Port Said"},{cityID:19,cityArabicName:"\u0627\u0644\u0642\u0644\u064a\u0648\u0628\u064a\u0629",cityEnglishName:"Qalyubia"},{cityID:20,cityArabicName:"\u0642\u0646\u0627",cityEnglishName:"Qena"},{cityID:21,cityArabicName:"\u0627\u0644\u0628\u062d\u0631 \u0627\u0644\u0623\u062d\u0645\u0631",cityEnglishName:"Red Sea"},{cityID:22,cityArabicName:"\u0627\u0644\u0634\u0631\u0642\u064a\u0629",cityEnglishName:"Sharqia"},{cityID:23,cityArabicName:"\u0633\u0648\u0647\u0627\u062c",cityEnglishName:"Sohag"},{cityID:24,cityArabicName:"\u0627\u0644\u0633\u0648\u064a\u0633",cityEnglishName:"Suez"},{cityID:25,cityArabicName:"\u0627\u0644\u0648\u0627\u062f\u064a \u0627\u0644\u062c\u062f\u064a\u062f",cityEnglishName:"New Valley"},{cityID:26,cityArabicName:"\u062c\u0646\u0648\u0628 \u0633\u064a\u0646\u0627\u0621",cityEnglishName:"South of Sinaa"},{cityID:27,cityArabicName:"\u0634\u0645\u0627\u0644 \u0633\u064a\u0646\u0627\u0621",cityEnglishName:"North Sinai"}]}language(){this.lang=this._TranslateService.currentLang;let i=this._TranslateService.onLangChange.subscribe({next:t=>{this.lang=t.lang}});this.SubscriptionArr.push(i)}getImagePath(i){let t=i.target.files[0];if(null!=t){new FormData,this.fileToUpload=t,this.filename=t.name;const l=new FileReader;l.readAsDataURL(t),l.onload=()=>{this.base64=l.result}}else this.base64="",this.fileToUpload="",this.filename="",null!=this.userImage?.value&&(this.base64=this.url+this.userImage?.value)}getUserById(){let i=this._ApiserviceService.UserDataFromToken();this.userID=i.ID,this._ApiserviceService.getById("mangercontrol",this.userID).subscribe({next:t=>{this.name?.patchValue(t.name),this.phoneNumber?.patchValue(t.phoneNumber),this.userImage?.patchValue(t.userImage)}})}changeData(){if(null==this.name?.value)return void alert("Name");if(""==this.name?.value.trim())return void alert("Name Empty");if(0==this.name.valid)return void alert("Name Min Length 3");if(null==this.phoneNumber?.value)return void alert("Phone Number");if(""==this.phoneNumber?.value.trim())return void alert("Phone Number Empty");if(0==this.phoneNumber.valid)return void alert("Phone Number Min Length 11");let i={userId:this.userID,name:this.name?.value.trim(),userImage:this.userImage?.value,phoneNumber:this.phoneNumber.value};if(""==this.filename&&""==this.fileToUpload){let t=this._ApiserviceService.put("mangercontrol/updateuserdata",this.userID,i).subscribe({next:s=>{this.name?.patchValue(s.name),this.phoneNumber?.patchValue(s.phoneNumber),this.userImage?.patchValue(s.userImage),this.fileToUpload="",this.filename="",this.toastr.success("ar"==this.lang?"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0646\u062c\u0627\u062d":"Data Update Success")}});this.SubscriptionArr.push(t)}else{let t=new FormData;t.append("file",this.fileToUpload,this.filename);let s=this._ApiserviceService.post("mangercontrol/upload",t).subscribe({next:l=>{i.userImage=l;let C=this._ApiserviceService.put("mangercontrol/updateuserdata",this.userID,i).subscribe({next:h=>{this.name?.patchValue(h.name),this.phoneNumber?.patchValue(h.phoneNumber),this.userImage?.patchValue(h.userImage),this.fileToUpload="",this.filename="",this.toastr.success("ar"==this.lang?"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0646\u062c\u0627\u062d":"Data Update Success")}});this.SubscriptionArr.push(C)}});this.SubscriptionArr.push(s)}}ngOnDestroy(){for(let i=0;i<this.SubscriptionArr.length;i++)this.SubscriptionArr[i].unsubscribe()}}m.\u0275fac=function(i){return new(i||m)(e.Y36(b._W),e.Y36(u.sK),e.Y36(N.O))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-profile"]],decls:29,vars:16,consts:[[1,"col-12","col-sm-4","col-lg-3","p-2","mx-auto",3,"formGroup"],[1,"fs-1","text-center","py-3"],[1,"col-7","mx-auto","text-center","position-relative","overflow-hidden"],["class","col-12","src","assets/images/avatar-placeholder.png","alt","userimage",4,"ngIf"],["class","col-12","alt","userimage",3,"src",4,"ngIf"],["alt","",3,"src",4,"ngIf"],[1,"overflow-hidden","bg-info","divCamera"],[1,"cameraButton"],["width","35","height","35","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-camera-fill","p-2"],["d","M10.5 8.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"],["d","M2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4H2zm.5 2a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1zm9 2.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0z"],["type","file","accept","image/*;capture=camera",3,"change"],["for","name"],["formControlName","name","id","name","name","name","type","text",1,"form-control"],["for","phone"],["formControlName","phoneNumber","id","phone","name","phone","type","number",1,"form-control"],[1,"mt-3"],["type","submit",1,"btn","btnSave","fs-4","px-4","col-12",3,"click"],["src","assets/images/avatar-placeholder.png","alt","userimage",1,"col-12"],["alt","userimage",1,"col-12",3,"src"],["alt","",3,"src"]],template:function(i,t){1&i&&(e.TgZ(0,"section")(1,"form",0)(2,"h1",1),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2),e.YNc(6,d,1,0,"img",3),e.YNc(7,I,1,1,"img",4),e.YNc(8,v,1,1,"img",5),e.TgZ(9,"div",6)(10,"label",7),e.O4$(),e.TgZ(11,"svg",8),e._UZ(12,"path",9)(13,"path",10),e.qZA(),e.kcU(),e.TgZ(14,"input",11),e.NdJ("change",function(l){return t.getImagePath(l)}),e.qZA()()()(),e.TgZ(15,"div")(16,"label",12),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",13),e.qZA(),e.TgZ(20,"div")(21,"label",14),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"input",15),e.qZA(),e.TgZ(25,"div",16)(26,"button",17),e.NdJ("click",function(){return t.changeData()}),e._uU(27),e.ALo(28,"translate"),e.qZA()()()()),2&i&&(e.xp6(1),e.Q6J("formGroup",t.Form),e.xp6(2),e.Oqu(e.lcZ(4,8,"PersonalPage")),e.xp6(3),e.Q6J("ngIf",!t.base64&&null==(null==t.userImage?null:t.userImage.value)),e.xp6(1),e.Q6J("ngIf",t.base64),e.xp6(1),e.Q6J("ngIf",null!=(null==t.userImage?null:t.userImage.value)&&!t.base64),e.xp6(9),e.hij(" ",e.lcZ(18,10,"Name")," "),e.xp6(5),e.hij(" ",e.lcZ(23,12,"PhoneNumber")," "),e.xp6(5),e.Oqu(e.lcZ(28,14,"Save")))},dependencies:[p.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.sg,a.u,u.X$],styles:["section[_ngcontent-%COMP%]{min-height:90vh;display:flex;justify-content:center;align-items:center}label[_ngcontent-%COMP%]{margin:6px 0}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-size:1.6rem}form[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-height:15rem;max-height:15rem;width:15rem;border-radius:50%}label.cameraButton[_ngcontent-%COMP%]{display:inline-block;margin:0;padding:0;border-color:#EEE #CCC #CCC #EEE;background-color:#ddd}label.cameraButton[_ngcontent-%COMP%]:active{border-color:#CCC #EEE #EEE #CCC}label.cameraButton[_ngcontent-%COMP%]   input[accept*=camera][_ngcontent-%COMP%]{display:none}.divCamera[_ngcontent-%COMP%]{position:absolute;bottom:1.5px;left:8px;border-radius:50%}.divCamera[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{cursor:pointer}.btnSave[_ngcontent-%COMP%]{background-color:#ffd333;color:#333;box-shadow:none!important}"]});const A=[{path:"",title:"Your Profile",component:m}];class c{}c.\u0275fac=function(i){return new(i||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[y.Bz.forChild(A),y.Bz]});class o{}o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,c,u.aw,a.UX]})}}]);