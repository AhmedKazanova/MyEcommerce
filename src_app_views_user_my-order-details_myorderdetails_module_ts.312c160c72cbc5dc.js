"use strict";(self.webpackChunkEcommerce=self.webpackChunkEcommerce||[]).push([["src_app_views_user_my-order-details_myorderdetails_module_ts"],{4271:(U,g,s)=>{s.r(g),s.d(g,{MyorderdetailsModule:()=>a});var c=s(6895),l=s(9197),f=s(449),h=s(8724),_=s(5079),m=s(2340),e=s(4650),p=s(4463);function v(n,t){if(1&n&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&n){const r=e.oxw().$implicit;e.xp6(1),e.hij("Name : ",r.productName,"")}}function x(n,t){if(1&n&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&n){const r=e.oxw().$implicit;e.xp6(1),e.hij(" Name : ",r.productEnglishName,"")}}function A(n,t){1&n&&(e.TgZ(0,"span",18),e._uU(1,"\u0646\u0641\u0630\u062a \u0627\u0644\u0643\u0645\u064a\u0629"),e.qZA())}const I=function(n){return["/user/productdetails",n]};function C(n,t){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12),e._UZ(2,"img",13),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",14),e.YNc(6,v,2,1,"span",15),e.YNc(7,x,2,1,"span",15),e.TgZ(8,"span",16),e._uU(9),e.ALo(10,"currency"),e.qZA()(),e.TgZ(11,"div",14)(12,"span",16),e._uU(13),e.ALo(14,"currency"),e.qZA(),e.TgZ(15,"span",16),e._uU(16),e.qZA(),e.YNc(17,A,2,0,"span",17),e.qZA()()),2&n){const r=t.$implicit,o=e.oxw();e.xp6(2),e.s9C("src",o.url+r.productImage,e.LSH),e.s9C("alt",e.lcZ(3,10,"ProductImage")),e.s9C("title",e.lcZ(4,12,"ProductImage")),e.Q6J("routerLink",e.VKq(20,I,r.productID)),e.xp6(4),e.Q6J("ngIf","ar"==o.lang),e.xp6(1),e.Q6J("ngIf","en"==o.lang),e.xp6(2),e.hij("Price : ",e.xi3(10,14,r.savePriceProduct,"USD"),""),e.xp6(4),e.hij("Total : ",e.xi3(14,17,o.getItemTotal(r),"USD"),""),e.xp6(3),e.hij("Qty : ",r.quantity,""),e.xp6(1),e.Q6J("ngIf",1==r.ofStock&&0==r.quantity)}}function y(n,t){1&n&&(e.TgZ(0,"span",8),e._uU(1," \u0627\u0644\u0634\u062d\u0646 : \u062c\u0627\u0631\u064a \u0627\u0644\u0634\u062d\u0646 \u0642\u0631\u064a\u0628\u0627 "),e.qZA())}function O(n,t){1&n&&(e.TgZ(0,"span",8),e._uU(1," \u0627\u0644\u0634\u062d\u0646 : \u062a\u0645 \u0627\u0644\u0634\u062d\u0646 \u0648\u0627\u0644\u0637\u0644\u0628 \u0641\u064a \u0627\u0644\u0637\u0631\u064a\u0642 "),e.qZA())}function Z(n,t){1&n&&(e.TgZ(0,"span",8),e._uU(1," \u0627\u0644\u062a\u0648\u0635\u0644 : \u062a\u0645 \u0627\u0644\u062a\u0648\u0635\u064a\u0644"),e.qZA())}function D(n,t){if(1&n&&(e.ynx(0),e.YNc(1,y,2,0,"span",19),e.YNc(2,O,2,0,"span",19),e.YNc(3,Z,2,0,"span",19),e.BQk()),2&n){const r=e.oxw();e.xp6(1),e.Q6J("ngIf",0==r.order.deliveredProgress),e.xp6(1),e.Q6J("ngIf",1==r.order.deliveredProgress&&0==r.order.delivered),e.xp6(1),e.Q6J("ngIf",1==r.order.delivered&&1==r.order.deliveredProgress)}}function T(n,t){1&n&&(e.TgZ(0,"span",20),e._uU(1,"\u0627\u0648\u0631\u062f\u0631 \u0645\u0644\u063a\u064a "),e.qZA())}function b(n,t){1&n&&(e.TgZ(0,"span",20),e._uU(1,"\u0627\u0648\u0631\u062f\u0631 \u0645\u0631\u0641\u0648\u0636 "),e.qZA())}const P=function(){return["/user/home"]};class d{constructor(t,r){this._TranslateService=t,this._ActivatedRoute=r,this.SubscriptionArr=[],this.lang="",this.url=`${m.N.imageUrl}`,this.order={orderID:0,userId:"",orderDetails:"",userAddress:"",orderSaw:!1,totalOrder:0,orderDate:"",delivered:!1,deliveredProgress:!1,orderReturns:!1,orderItems:[],clientCancle:!1,adminRefuse:!1,clientDeleted:!1,adminDeleted:!1,user:"",userPhone:""},this.orderItems=[]}ngOnInit(){this.language(),this.startConnection(),this.getorderDateils(),"Connecting"==this.Hub_Connection?.state?(this.askServerOrderUpdate(),this.askServerOrderProgress()):alert("\u0647\u0646\u0627\u0643 \u062e\u0637\u0627 \u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u0639\u062f \u0627\u0644\u062a\u062d\u062f\u064a\u062b")}language(){this.lang=this._TranslateService.currentLang;let t=this._TranslateService.onLangChange.subscribe({next:r=>{this.lang=r.lang}});this.SubscriptionArr.push(t)}tranformNumber(t){return Number(t)}getorderDateils(){let t=this._ActivatedRoute.data.subscribe({next:r=>{this.order=r[0];let o=r[0].orderItems;this.orderItems=r[0].orderItems.map(i=>i.product);for(let i=0;i<o.length;i++)this.orderItems[i].quantity=o[i].quantity,this.orderItems[i].savePriceProduct=o[i].savePriceProduct}});this.SubscriptionArr.push(t)}startConnection(){this.Hub_Connection=(new h.s).withUrl(`${m.N.signalrUrl}`,{skipNegotiation:!0,transport:_.n.WebSockets}).build(),this.Hub_Connection.start().then(()=>{}).catch(t=>{console.error("Error Hub Connection",t),alert("Error Hub Start Connection")})}askServerOrderUpdate(){this.Hub_Connection?.on("orderUpdate",t=>{if(this.order.orderID==t.orderID){this.order.delivered=t.delivered,this.order.deliveredProgress=t.deliveredProgress,this.order.orderDetails=t.orderDetails,this.order.orderReturns=t.orderReturns,this.order.orderSaw=t.orderSaw;for(let r=0;r<this.orderItems.length;r++)for(let o=0;o<t.orderItems.length;o++)t.orderItems[o].productID==this.orderItems[r].productID&&(this.orderItems[r].quantity=t.orderItems[o].quantity);this.totalOrder()}})}askServerOrderProgress(){this.Hub_Connection?.on("orderProgress",t=>{this.order.orderID==t.orderID&&(this.order.delivered=t.delivered,this.order.deliveredProgress=t.deliveredProgress,this.order.orderDetails=t.orderDetails,this.order.orderItems=t.orderItems,this.order.orderReturns=t.orderReturns,this.order.orderSaw=t.orderSaw,this.order.totalOrder=t.totalOrder,this.order.userAddress=t.userAddress)})}getItemTotal(t){return t.quantity&&t.savePriceProduct?Number(t.savePriceProduct)*t.quantity:0}totalOrder(){return this.orderItems.reduce((t,r)=>t+this.getItemTotal(r),0)}trackProduct(t,r){return r?r.productID:void 0}ngOnDestroy(){for(let t=0;t<this.SubscriptionArr.length;t++)this.SubscriptionArr[t].unsubscribe();this.Hub_Connection?.off(""),"Connecting"==this.Hub_Connection?.state&&this.Hub_Connection?.stop()}}d.\u0275fac=function(t){return new(t||d)(e.Y36(p.sK),e.Y36(l.gz))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-my-order-details"]],decls:23,vars:15,consts:[[1,"container-lg"],[1,"breadcrumb","bg-white","my-5","py-4","px-3"],[3,"routerLink"],[1,"mx-2"],[1,"d-flex","flex-wrap","justify-content-between"],[1,"col-12","col-md-6","p-2"],["class","d-flex  align-items-center justify-content-md-start  bg-white p-2",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12","col-md-4","bg-white","p-2"],[1,"d-block","p-2","fs-4"],[4,"ngIf"],["class","text-danger d-block p-2 fs-4",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-md-start","bg-white","p-2"],[1,"col-4","p-1","text-center"],["width","120","height","90",1,"col-12","col-xl-9","mx-auto",3,"routerLink","src","alt","title"],[1,"col-4"],["class","d-block fs-4 p-1",4,"ngIf"],[1,"d-block","fs-4","p-1"],["class","text-danger fs-4",4,"ngIf"],[1,"text-danger","fs-4"],["class","d-block p-2 fs-4",4,"ngIf"],[1,"text-danger","d-block","p-2","fs-4"]],template:function(t,r){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"a",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",3),e._uU(6,"/"),e.qZA(),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span",3),e._uU(11,"/"),e.qZA(),e.TgZ(12,"span",3),e._uU(13),e.qZA()(),e.TgZ(14,"div",4)(15,"div",5),e.YNc(16,C,18,22,"div",6),e.qZA(),e.TgZ(17,"div",7)(18,"span",8),e._uU(19),e.qZA(),e.YNc(20,D,4,3,"ng-container",9),e.YNc(21,T,2,0,"span",10),e.YNc(22,b,2,0,"span",10),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(14,P)),e.xp6(1),e.Oqu(e.lcZ(4,10,"Home")),e.xp6(5),e.Oqu(e.lcZ(9,12,"OrderDetails")),e.xp6(5),e.hij("Order ID ",r.order.orderID,""),e.xp6(3),e.Q6J("ngForOf",r.orderItems)("ngForTrackBy",r.trackProduct),e.xp6(3),e.hij("TotalOrder : ",r.totalOrder(),""),e.xp6(1),e.Q6J("ngIf",0==r.order.adminRefuse),e.xp6(1),e.Q6J("ngIf",1==r.order.clientCancle),e.xp6(1),e.Q6J("ngIf",1==r.order.adminRefuse))},dependencies:[c.sg,c.O5,l.rH,c.H9,p.X$],styles:["section[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.6rem;color:#333}section[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#ffd333;text-decoration:underline!important;text-underline-offset:10px!important}section[_ngcontent-%COMP%]{min-height:100vh}img[_ngcontent-%COMP%]{min-height:13rem!important;max-height:13rem!important;cursor:pointer}"]});const M=[{path:"",title:"My Orders Details",component:d,resolve:[f.n]}];class u{}u.\u0275fac=function(t){return new(t||u)},u.\u0275mod=e.oAB({type:u}),u.\u0275inj=e.cJS({imports:[l.Bz.forChild(M),l.Bz]});class a{}a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[c.ez,u,p.aw]})}}]);